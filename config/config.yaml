project:
  name: DLFE-LSTM-WSI
  version: 1.0.0
  seed: 42
  device: cuda:0
  log_dir: ./experiments/logs
  checkpoint_dir: ./experiments/checkpoints
  results_dir: ./experiments/results
data:
  dataset: 甘肃光伏功率预测数据集
  raw_dir: ./datas/2. 甘肃光伏功率预测数据集/data_original/solar_stations
  merge_method: single
  train_ratio: 0.7
  val_ratio: 0.2
  test_ratio: 0.1
  sequence_length: 24
  frequency_minutes: 15
  station_column: station
  timestamp_column: timestamp
  required_columns:
  - power
  - irradiance
  - temperature
  - pressure
  - humidity
walk_forward:
  enable: true
  n_folds: 4
  fold_definition:
    fold1:
      train_months: 12
      val_months: 1
      test_months: 2
    fold2:
      train_months: 15
      val_months: 1
      test_months: 2
    fold3:
      train_months: 18
      val_months: 1
      test_months: 2
    fold4:
      train_months: 21
      val_months: 1
      test_months: 2
  online_learning:
    enable: true
    learning_rate_multiplier: 0.1
    max_updates_per_fold: 100
  weight_inheritance:
    enable: true
    strategy: full
preprocessing:
  caching: true
  cache_dir: ./data/cache
  normalization:
    method: minmax
    feature_range:
    - 0
    - 1
  vmd:
    n_modes: 5
    alpha: 2000
    tau: 0.1
    tolerance: 1.0e-06
    max_iterations: 500
feature_engineering:
  ci_thresholds:
  - 0.34075845181405107
  - 0.4009113122074764
  wsi_thresholds:
  - 0.7541151075794098
  - 0.7554378813685727
  fusion_weights:
    ci: 0.7
    wsi: 0.3
  clustering:
    daytime_mode: ghi
    daytime_ghi_min: 5.0
    daytime_ge_min: 20.0
    features_basic_only: true
    window_mins: 60
    min_samples_per_window: 3
    scaler: robust
    use_pca: false
    pca_n: 10
    feat_weight_tod: 3.0
    feat_weight_diffuse: 3.0
    feat_weight_z: 1.0
    learn_prototypes: true
    proto_sunny: src/tools/晴天.xlsx
    proto_cloudy: src/tools/多云.xlsx
    proto_overcast: src/tools/雨天.xlsx
    prototypes_min_count: 30
    prototypes_tol_mins: 8
  reuse_cluster_labels:
    enabled: true
    fallback: classify
    min_coverage: 0.95
    use_combined_only: true  # 直接使用合并标签，跳过单独split匹配
    splits:
      train:
        labels_path: diagnostics\init_thresholds\init_20251129_165938\cluster_labels.npy
        timestamps_path: diagnostics\init_thresholds\init_20251129_165938\cluster_timestamps.parquet
        meta_path: diagnostics\init_thresholds\init_20251129_165938\cluster_labels_meta.json
      val:
        labels_path: diagnostics\init_thresholds\init_20251129_165956\cluster_labels.npy
        timestamps_path: diagnostics\init_thresholds\init_20251129_165956\cluster_timestamps.parquet
        meta_path: diagnostics\init_thresholds\init_20251129_165956\cluster_labels_meta.json
      test:
        labels_path: diagnostics\init_thresholds\init_20251129_170010\cluster_labels.npy
        timestamps_path: diagnostics\init_thresholds\init_20251129_170010\cluster_timestamps.parquet
        meta_path: diagnostics\init_thresholds\init_20251129_170010\cluster_labels_meta.json
  weather_lgb_classifier:
    model_dir: diagnostics\init_thresholds\init_20251129_165938
  daytime:
    mode: ghi
    ghi_min_wm2: 5.0
    ge_min_wm2: 20.0
    night_handling: exclude
    apply_mask_in_vmd: true
    apply_mask_in_dpsr: true
    apply_mask_in_dlfe: true
  dpsr:
    embedding_dim: 30
    neighborhood_size: 20
    regularization: 0.01
  dlfe:
    target_dim: 30
    sigma: 1.0
    alpha: 0.0009765625
    beta: 0.1
    max_iter: 100
    tol: 1.0e-05
    use_float32_eigh: false
    use_sparse_matrix: true
model:
  output_dim: 3
  lstm:
    hidden_sizes:
    - 100
    - 50
    dropout_rates:
    - 0.3
    - 0.2
training:
  batch_size: 64
  epochs: 100
  learning_rate: 0.001
  optimizer: adamw
  weight_decay: 0.01
  scheduler:
    type: cosine
    eta_min: 1.0e-06
  gradient_accumulation_steps: 4
  num_workers: 4
adaptive:
  error_window: 100
  trigger_thresholds:
    level1: 0.1
    level2: 0.15
    level3: 0.05
    level4: 5
evaluation:
  device: auto
  prated: 50
  horizons:
  - 1
  - 2
  - 4
  metrics:
  - RMSE
  - MAE
  - NRMSE
  calculate_confidence: true
  confidence_level: 0.95
  n_bootstrap: 1000
  save_results: true
  generate_report: true
  report_format: markdown
